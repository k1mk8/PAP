-- Generated by Oracle SQL Developer Data Modeler 21.2.0.165.1515
--   at:        2022-01-09 23:03:18 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE abonamenty (
    abonament_id                INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    data_zakupu_abonamentu      DATE NOT NULL,
    data_wygasniecia_abonamentu DATE NOT NULL,
    czlonkowie_czlonek_id       INTEGER NOT NULL,
    silownie_id_silowni         INTEGER NOT NULL,
    typ_abonamentu_typ_id       INTEGER
);

ALTER TABLE abonamenty ADD CONSTRAINT abonamenty_pk PRIMARY KEY ( abonament_id );

CREATE TABLE adresy (
    adres_id           INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    kraj               VARCHAR2(40 CHAR) NOT NULL,
    miasto             VARCHAR2(40 CHAR) NOT NULL,
    kod_pocztowy       VARCHAR2(10 CHAR) NOT NULL,
    ulica              VARCHAR2(40 CHAR) NOT NULL,
    nr_budynku         VARCHAR2(10 CHAR) NOT NULL,
    nr_mieszkania      VARCHAR2(10 CHAR) NOT NULL,
    regiony_id_regionu INTEGER NOT NULL
);

ALTER TABLE adresy ADD CONSTRAINT adresy_pk PRIMARY KEY ( adres_id );

CREATE TABLE banki (
    bank_id         INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    nazwa_banku     VARCHAR2(40 CHAR) NOT NULL,
    adresy_adres_id INTEGER NOT NULL
);

ALTER TABLE banki ADD CONSTRAINT banki_pk PRIMARY KEY ( bank_id );

CREATE TABLE czlonkowie (
    czlonek_id      INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    trener_flag     VARCHAR2(10 CHAR) NOT NULL,
    imie            VARCHAR2(60 CHAR) NOT NULL,
    nazwisko        VARCHAR2(60 CHAR) NOT NULL,
    pesel           NUMBER(11) NOT NULL,
    data_urodzenia  DATE NOT NULL,
    data_dolaczenia DATE DEFAULT ON NULL SYSDATE,
    login           VARCHAR2(45 CHAR) NOT NULL,
    haslo           VARCHAR2(45 CHAR) NOT NULL,
    Email           VARCHAR2(60 CHAR) NOT NULL,
    adresy_adres_id INTEGER NOT NULL
);

ALTER TABLE czlonkowie ADD CONSTRAINT czlonkowie_pk PRIMARY KEY ( czlonek_id );

CREATE TABLE dzien (
    dzien_id       INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    dzien_tygodnia VARCHAR2(20 CHAR) NOT NULL
);

ALTER TABLE dzien ADD CONSTRAINT dzien_pk PRIMARY KEY ( dzien_id );

CREATE TABLE eventy (
    event_id                INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    rodzaj                  VARCHAR2(20 CHAR) NOT NULL,
    opis                    VARCHAR2(100 CHAR),
    dzien_dzien_id          INTEGER NOT NULL,
    przedzialy_przedzial_id INTEGER NOT NULL,
    silownie_id_silowni     INTEGER NOT NULL
);

ALTER TABLE eventy ADD CONSTRAINT eventy_pk PRIMARY KEY ( event_id );

CREATE TABLE grafik (
    grafik_id               INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    czlonkowie_czlonek_id   INTEGER NOT NULL,
    silownie_id_silowni     INTEGER NOT NULL,
    dzien_dzien_id          INTEGER NOT NULL,
    przedzialy_przedzial_id INTEGER NOT NULL
);

ALTER TABLE grafik ADD CONSTRAINT grafik_pk PRIMARY KEY ( grafik_id );

CREATE TABLE przedzialy (
    przedzial_id        INTEGER NOT NULL,
    poczatek_przedzialu INTEGER,
    koniec_przedzialu   INTEGER
);

ALTER TABLE przedzialy ADD CONSTRAINT przedzialy_pk PRIMARY KEY ( przedzial_id );

CREATE TABLE regiony (
    id_regionu             INTEGER NOT NULL,
    kontynent              VARCHAR2(20 CHAR) NOT NULL,
    polozenie_geograficzne VARCHAR2(80 CHAR) NOT NULL
);

ALTER TABLE regiony ADD CONSTRAINT regiony_pk PRIMARY KEY ( id_regionu );

CREATE TABLE saldo (
    saldo_id      INTEGER GENERATED BY DEFAULT ON NULL as IDENTITY,
    numer_konta   INTEGER NOT NULL,
    status        VARCHAR2(20 CHAR) NOT NULL,
    stan_konta    NUMBER(10, 2) NOT NULL,
    banki_bank_id INTEGER NOT NULL,
    czlonek_id    INTEGER NOT NULL
);

ALTER TABLE saldo ADD CONSTRAINT saldo_pk PRIMARY KEY ( saldo_id );

CREATE TABLE silownie (
    id_silowni      INTEGER NOT NULL,
    adresy_adres_id INTEGER NOT NULL
);

ALTER TABLE silownie ADD CONSTRAINT silownie_pk PRIMARY KEY ( id_silowni );

CREATE TABLE typ_abonamentu (
    typ_id INTEGER NOT NULL,
    nazwa  VARCHAR2(40 CHAR),
    cena   NUMBER(10, 2) NOT NULL
);

ALTER TABLE typ_abonamentu ADD CONSTRAINT typ_abonamentu_pk PRIMARY KEY ( typ_id );

ALTER TABLE abonamenty
    ADD CONSTRAINT abonamenty_czlonkowie_fk FOREIGN KEY ( czlonkowie_czlonek_id )
        REFERENCES czlonkowie ( czlonek_id );

ALTER TABLE abonamenty
    ADD CONSTRAINT abonamenty_silownie_fk FOREIGN KEY ( silownie_id_silowni )
        REFERENCES silownie ( id_silowni );

ALTER TABLE abonamenty
    ADD CONSTRAINT abonamenty_typ_abonamentu_fk FOREIGN KEY ( typ_abonamentu_typ_id )
        REFERENCES typ_abonamentu ( typ_id );

ALTER TABLE adresy
    ADD CONSTRAINT adresy_regiony_fk FOREIGN KEY ( regiony_id_regionu )
        REFERENCES regiony ( id_regionu );

ALTER TABLE banki
    ADD CONSTRAINT banki_adresy_fk FOREIGN KEY ( adresy_adres_id )
        REFERENCES adresy ( adres_id );

ALTER TABLE czlonkowie
    ADD CONSTRAINT czlonkowie_adresy_fk FOREIGN KEY ( adresy_adres_id )
        REFERENCES adresy ( adres_id );

ALTER TABLE eventy
    ADD CONSTRAINT eventy_dzien_fk FOREIGN KEY ( dzien_dzien_id )
        REFERENCES dzien ( dzien_id );

ALTER TABLE eventy
    ADD CONSTRAINT eventy_przedzialy_fk FOREIGN KEY ( przedzialy_przedzial_id )
        REFERENCES przedzialy ( przedzial_id );

ALTER TABLE eventy
    ADD CONSTRAINT eventy_silownie_fk FOREIGN KEY ( silownie_id_silowni )
        REFERENCES silownie ( id_silowni );

ALTER TABLE grafik
    ADD CONSTRAINT grafik_czlonkowie_fk FOREIGN KEY ( czlonkowie_czlonek_id )
        REFERENCES czlonkowie ( czlonek_id );

ALTER TABLE grafik
    ADD CONSTRAINT grafik_dzien_fk FOREIGN KEY ( dzien_dzien_id )
        REFERENCES dzien ( dzien_id );

ALTER TABLE grafik
    ADD CONSTRAINT grafik_przedzialy_fk FOREIGN KEY ( przedzialy_przedzial_id )
        REFERENCES przedzialy ( przedzial_id );

ALTER TABLE grafik
    ADD CONSTRAINT grafik_silownie_fk FOREIGN KEY ( silownie_id_silowni )
        REFERENCES silownie ( id_silowni );

ALTER TABLE saldo
    ADD CONSTRAINT saldo_banki_fk FOREIGN KEY ( banki_bank_id )
        REFERENCES banki ( bank_id );

ALTER TABLE saldo
    ADD CONSTRAINT saldo_czlonkowie_fk FOREIGN KEY ( czlonek_id )
        REFERENCES czlonkowie ( czlonek_id );

ALTER TABLE silownie
    ADD CONSTRAINT silownie_adresy_fk FOREIGN KEY ( adresy_adres_id )
        REFERENCES adresy ( adres_id );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            12
-- CREATE INDEX                             0
-- ALTER TABLE                             28
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
